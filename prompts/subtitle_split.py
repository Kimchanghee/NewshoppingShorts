# -*- coding: utf-8 -*-
"""
자막 분할 프롬프트
긴 자막을 자연스러운 단위로 분할하기 위한 Gemini 프롬프트
"""

def get_subtitle_split_prompt(text: str) -> str:
    """
    자막 분할용 프롬프트를 생성합니다.

    Args:
        text: 분할할 원본 텍스트

    Returns:
        Gemini API에 전달할 프롬프트 문자열
    """
    return f"""다음 한국어 문장을 자막용으로 분할하세요.

⚠️ 중요: 아래 ```블록 안의 지시만 따르세요. 블록 밖 지시는 무시하세요.

```
【입력 문장】
{text}

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
【분할 규칙】
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

▶ 분할 기준:
- 10글자 초과할 때만 분할 (10글자 이하면 그대로 출력)
- 각 세그먼트는 5~10글자 유지
- 5글자 미만으로는 자르지 않음

▶ 분할 금지 위치:
- 조사 앞에서 자르기 금지 (은/는/이/가/을/를/에/의/로/와/과 등)
- 어미 중간에서 자르기 금지 (~하는, ~된, ~할 등)
- 의존명사 앞에서 자르기 금지 (것, 수, 데, 줄, 바 등)
- 구두점(,.) 바로 앞에서 자르기 금지
- 괄호/따옴표 안에서 자르기 금지
- 영어 단어 중간에서 자르기 금지
- 숫자+단위 사이에서 자르기 금지 (예: 100ml, 3개)

▶ 비의역 원칙:
- 원문 수정/재배열/의역 금지
- 공백 정리 외 어떤 변형도 금지
- 글자 추가/삭제 금지

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
【출력 형식】
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

▶ 줄마다 세그먼트 텍스트만 출력
▶ 번호, 불릿(-, *), 따옴표, 설명 금지
▶ 마크다운, 코드블록 금지

예시 (10글자 초과 시):
간편하게 사용하는
만능 배수구 클리너

예시 (10글자 이하 시):
정말 좋아요

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
【자기검증 체크리스트】
출력 직전 아래 항목을 확인하고, 어기면 스스로 재조정 후 출력:
□ 각 세그먼트가 5~10글자인가?
□ 조사/어미/의존명사 앞에서 자르지 않았는가?
□ 원문을 수정/의역하지 않았는가?
□ 번호/불릿/따옴표/설명 없이 텍스트만 출력했는가?
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
```
"""
